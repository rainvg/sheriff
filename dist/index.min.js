function __command__(n){"use strict";return new Promise(function(e,t){ps.lookup(n,function(n,o){n?t(n):e(o)})})}function __lockable__(n){"use strict";return new Promise(function(e){fs.readFile(n,function(n,t){n?e(!0):(t=t.toString(),__command__(process.pid.toString()).then(function(n){__command__(t).then(function(t){e(n===t?!1:!0)})}))})})}function lock(n){"use strict";return new Promise(function(e,t){__lockable__(n).then(function(o){o?fs.writeFile(n,process.pid.toString(),function(n){n?t():e()}):t()})})}function unlock(n){return new Promise(function(e,t){fs.readFile(n,function(o,i){o||i.toString()!==process.pid.toString()?t():fs.writeFile(n,"",function(n){n?t():e()})})})}var fs=require("fs"),exec=require("child_process").exec,ps={lookup:function(n,e){/^win/.test(process.platform)?exec('tasklist /FI "PID eq '+n+'" /NH',function(n,t){e(n,t.split(" ")[0])}):exec("ps aux | grep "+n+" | grep -v 'grep' | awk '{print $11}'",function(n,t){e(n,t)})}};module.exports={lock:lock,unlock:unlock};