function __command__(n){"use strict";return new Promise(function(o){ps.lookup({pid:n},function(t,i){var e="";i.forEach(function(o){o.pid===n&&(e=o.command)}),o(e)})})}function __lockable__(n){"use strict";return new Promise(function(o){fs.readFile(n,function(n,t){n?o(!0):(t=t.toString(),__command__(process.pid.toString()).then(function(n){__command__(t).then(function(t){o(n===t?!1:!0)})}))})})}function lock(n){"use strict";return new Promise(function(o,t){__lockable__(n).then(function(i){i?fs.writeFile(n,process.pid.toString(),function(n){n?t():o()}):t()})})}function unlock(n){return new Promise(function(o,t){fs.readFile(n,function(i,e){i||e.toString()!==process.pid.toString()?t():fs.writeFile(n,"",function(n){n?t():o()})})})}var fs=require("fs"),ps=require("ps-nodejs");module.exports={lock:lock,unlock:unlock};