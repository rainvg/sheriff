function __command__(n){"use strict";return n=n||process.pid.toString(),new Promise(function(o){ps.lookup({pid:n},function(t,e){var i="";e.forEach(function(o){o.pid===n&&(i=o.command)}),o(i)})})}function __lockable__(n){"use strict";return new Promise(function(o){fs.readFile(n,function(n,t){n?o(!0):__command__().then(function(n){__command__(t).then(function(t){o(n===t?!1:!0)})})})})}function lock(n){"use strict";return new Promise(function(o,t){__lockable__(n).then(function(e){e?fs.writeFile(n,process.pid.toString(),function(n){n?t():o()}):t()})})}var fs=require("fs"),ps=require("ps-node");module.exports={lock:lock};